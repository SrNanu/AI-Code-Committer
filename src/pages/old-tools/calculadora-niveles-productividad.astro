---
import Layout from '../../layouts/Layout.astro';

// Metadatos de la página
export const frontmatter = {
  title: 'Calculadora de Niveles de Productividad',
  description: `Como profesional que busca mejorar su eficiencia, quiero una herramienta que me permita ingresar mis tareas y estimar el tiempo que dedicaré a cada una, para poder planificar mejor mi jornada laboral.`,
  tags: ['["productividad"', '"gestión del tiempo"', '"tareas"', '"eficiencia"]']
};
---

<Layout title={frontmatter.title}>
  <a href={import.meta.env.BASE_URL} class="back-link">&larr; Volver a la Fábrica</a>
  
  <div class="tool-container">
    <h1>{frontmatter.title}</h1>
    <p>{frontmatter.description}</p>
    
    <!-- === COMIENZA EL CÓDIGO HTML DE LA HERRAMIENTA === -->
    <div class="calculator-wrapper">
      <div class="form-container">
        <div class="input-group">
          <label for="task-name">Nombre de la Tarea:</label>
          <input type="text" id="task-name" class="input-field" />
        </div>
        <div class="input-group">
          <label for="task-time">Tiempo Estimado (horas):</label>
          <input type="number" id="task-time" class="input-field" step="0.1" />
        </div>
        <button class="btn btn-primary" id="add-task-btn">Agregar Tarea</button>
      </div>
      <div class="results-container">
        <h2>Lista de Tareas</h2>
        <ul id="task-list" class="results-list"></ul>
        <h3>Tiempo Total Estimado: <span id="total-time">0</span> horas</h3>
      </div>
    </div>
    <!-- === TERMINA EL CÓDIGO HTML DE LA HERRAMIENTA === -->
  </div>
</Layout>

<script>
// === COMIENZA EL CÓDIGO JAVASCRIPT DE LA HERRAMIENTA ===
const addTaskButton = document.getElementById('add-task-btn');
const taskList = document.getElementById('task-list');
const totalTimeDisplay = document.getElementById('total-time');

let totalTime = 0;

addTaskButton.addEventListener('click', () => {
  const taskNameInput = document.getElementById('task-name');
  const taskTimeInput = document.getElementById('task-time');
  const taskName = taskNameInput.value;
  const taskTime = parseFloat(taskTimeInput.value);

  if (taskName && !isNaN(taskTime) && taskTime > 0) {
    // Crear un nuevo item de lista
    const taskItem = document.createElement('li');
    taskItem.classList.add('task-list-item');

    // Agregar el texto de la tarea
    const taskText = document.createElement('span');
    taskText.classList.add('task-text');
    taskText.textContent = taskName + ' - ' + taskTime + ' horas';
    
    // Agregar botones de completar y eliminar
    const taskActions = document.createElement('div');
    taskActions.classList.add('task-actions');
    
    const completeButton = document.createElement('button');
    completeButton.classList.add('btn', 'btn-primary', 'btn-sm', 'complete-btn');
    completeButton.textContent = 'Completar';
    completeButton.addEventListener('click', () => {
      taskItem.style.textDecoration = 'line-through';
      completeButton.disabled = true;
    });

    const deleteButton = document.createElement('button');
    deleteButton.classList.add('btn', 'btn-primary', 'btn-sm', 'delete-btn');
    deleteButton.textContent = 'Eliminar';
    deleteButton.addEventListener('click', () => {
      totalTime -= taskTime;
      totalTimeDisplay.textContent = totalTime.toFixed(1);
      taskList.removeChild(taskItem);
    });

    taskActions.appendChild(completeButton);
    taskActions.appendChild(deleteButton);
    
    taskItem.appendChild(taskText);
    taskItem.appendChild(taskActions);
    
    taskList.appendChild(taskItem);
    
    // Actualizar el tiempo total
    totalTime += taskTime;
    totalTimeDisplay.textContent = totalTime.toFixed(1);
    
    // Limpiar los campos de entrada
    taskNameInput.value = '';
    taskTimeInput.value = '';
  }
});
// === TERMINA EL CÓDIGO JAVASCRIPT DE LA HERRAMIENTA ===
</script>