---
import Layout from '../../layouts/Layout.astro';

export const frontmatter = {
  title: 'Calculadora de Propinas',
  description: 'Como comensal en un restaurante, quiero una calculadora simple para dividir la cuenta y la propina entre varias personas. Debo poder ingresar el total de la cuenta, seleccionar el porcentaje de propina (10%, 15%, 20%) y el número de personas. La herramienta debe mostrar el total a pagar por persona y el total de la propina.',
  tags: ['calculadora', 'finanzas', 'utilidad', 'restaurante']
};
---
<Layout title={frontmatter.title}>
  <a href={import.meta.env.BASE_URL} class="back-link">&larr; Volver a la Fábrica</a>
  <div class="tool-container">
    <h1>{frontmatter.title}</h1>
    <p>{frontmatter.description}</p>
    <div class="tool-wrapper">
      <div class="form-container">
        <div class="input-group">
          <label for="totalBill">Total de la cuenta:</label>
          <input type="number" id="totalBill" class="input-field" placeholder="Ingrese el total" />
        </div>
        <div class="input-group">
          <label for="tipPercentage">Porcentaje de propina:</label>
          <select id="tipPercentage" class="input-field">
            <option value="0.10">10%</option>
            <option value="0.15">15%</option>
            <option value="0.20">20%</option>
          </select>
        </div>
        <div class="input-group">
          <label for="numberOfPeople">Número de personas:</label>
          <input type="number" id="numberOfPeople" class="input-field" placeholder="Ingrese el número de personas" />
        </div>
        <button class="btn btn-primary" id="calculateBtn">Calcular</button>
      </div>
      <div class="results-container">
        <div class="summary" id="resultsSummary">
          <div class="summary-item">
            <h4>Total de la propina:</h4>
            <p id="tipAmount">$0.00</p>
          </div>
          <div class="summary-item">
            <h4>Total a pagar por persona:</h4>
            <p id="perPersonAmount">$0.00</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>

<script>
  document.getElementById('calculateBtn').addEventListener('click', function() {
    const totalBill = parseFloat(document.getElementById('totalBill').value);
    const tipPercentage = parseFloat(document.getElementById('tipPercentage').value);
    const numberOfPeople = parseInt(document.getElementById('numberOfPeople').value);
    
    if (isNaN(totalBill) || isNaN(tipPercentage) || isNaN(numberOfPeople) || numberOfPeople <= 0) {
      alert('Por favor, ingrese valores válidos.');
      return;
    }
    
    const tipAmount = totalBill * tipPercentage;
    const totalAmount = totalBill + tipAmount;
    const perPersonAmount = totalAmount / numberOfPeople;
    
    document.getElementById('tipAmount').innerText = `$${tipAmount.toFixed(2)}`;
    document.getElementById('perPersonAmount').innerText = `$${perPersonAmount.toFixed(2)}`;
  });
</script>