---
import Layout from '../../layouts/Layout.astro';

// Metadatos de la página
export const frontmatter = {
  title: 'Calculadora de Proporciones de Ingredientes',
  description: `Como cocinero aficionado, quiero una herramienta que me permita ajustar las proporciones de los ingredientes en una receta, para poder cocinar porciones diferentes sin complicaciones.`,
  tags: ['cocina', 'recetas', 'proporciones', 'ingredientes']
};
---

<Layout title={frontmatter.title}>
  <a href={import.meta.env.BASE_URL} class="back-link">&larr; Volver a la Fábrica</a>
  
  <div class="tool-container">
    <h1>{frontmatter.title}</h1>
    <p>{frontmatter.description}</p>
    
    <!-- === COMIENZA EL CÓDIGO HTML DE LA HERRAMIENTA === -->
    <div class="calculator-wrapper">
      <div class="form-container">
        <div class="input-group">
          <label for="originalQuantity">Cantidad Original (en gramos):</label>
          <input type="number" id="originalQuantity" class="input-field" placeholder="Ej. 500">
        </div>
        
        <div class="input-group">
          <label for="desiredPortions">Porciones Deseadas:</label>
          <input type="number" id="desiredPortions" class="input-field" placeholder="Ej. 4">
        </div>
        
        <button id="calculateBtn" class="btn btn-primary">Calcular</button>
      </div>
      
      <div class="results-container">
        <h2>Resultados:</h2>
        <ul id="resultsList" class="results-list"></ul>
      </div>
    </div>
    <!-- === TERMINA EL CÓDIGO HTML DE LA HERRAMIENTA === -->
  </div>
</Layout>

<script>
// === COMIENZA EL CÓDIGO JAVASCRIPT DE LA HERRAMIENTA ===
document.addEventListener('DOMContentLoaded', () => {
  const originalQuantityInput = document.getElementById('originalQuantity');
  const desiredPortionsInput = document.getElementById('desiredPortions');
  const resultsList = document.getElementById('resultsList');
  const calculateBtn = document.getElementById('calculateBtn');

  function calculateIngredients() {
    const originalQuantity = parseFloat(originalQuantityInput.value) || 0;
    const desiredPortions = parseFloat(desiredPortionsInput.value) || 1;

    // Simulando una lista de ingredientes (ejemplo)
    const ingredients = {
      "Harina": originalQuantity * (desiredPortions / 4), // Asumiendo que la receta original es para 4 porciones
      "Azúcar": originalQuantity * (desiredPortions / 4) * 0.5, // Beber menos azúcar de lo que se requiere de harina
      "Mantequilla": originalQuantity * (desiredPortions / 4) * 0.25 // Menos mantequilla
    };

    displayResults(ingredients);
  }

  function displayResults(ingredients) {
    resultsList.innerHTML = ''; // Limpiar resultados anteriores
    for (const [ingredient, amount] of Object.entries(ingredients)) {
      const listItem = document.createElement('li');
      listItem.classList.add('task-list-item');
      listItem.innerHTML = `<span class="task-text">${ingredient}: ${amount.toFixed(2)} gramos</span>`;
      resultsList.appendChild(listItem);
    }
  }

  calculateBtn.addEventListener('click', calculateIngredients);
  originalQuantityInput.addEventListener('input', calculateIngredients);
  desiredPortionsInput.addEventListener('input', calculateIngredients);
});
// === TERMINA EL CÓDIGO JAVASCRIPT DE LA HERRAMIENTA ===
</script>