---
import Layout from '../../layouts/Layout.astro';

// Metadatos de la página
export const frontmatter = {
  title: 'Conversor de Unidades de Medida',
  description: `Como estudiante, quiero una herramienta que me permita convertir entre diferentes unidades de medida (como metros a kilómetros), para poder entender mejor las magnitudes en mis estudios.`,
  tags: ['conversión', 'unidades', 'educación', 'simple']
};
---

<Layout title={frontmatter.title}>
  <a href={import.meta.env.BASE_URL} class="back-link">&larr; Volver a la Fábrica</a>
  
  <div class="tool-container">
    <h1>{frontmatter.title}</h1>
    <p>{frontmatter.description}</p>
    
    <!-- === COMIENZA EL CÓDIGO HTML DE LA HERRAMIENTA === -->
    <div class="calculator-wrapper">
      <div class="form-container">
        <div class="input-group">
          <label for="value-input">Valor a convertir:</label>
          <input id="value-input" type="number" class="input-field" />
        </div>
        
        <div class="input-group">
          <label for="unit-from">Unidad de origen:</label>
          <select id="unit-from" class="input-field">
            <option value="meters">Metros</option>
            <option value="kilometers">Kilómetros</option>
            <option value="miles">Millas</option>
          </select>
        </div>
        
        <div class="input-group">
          <label for="unit-to">Unidad de destino:</label>
          <select id="unit-to" class="input-field">
            <option value="meters">Metros</option>
            <option value="kilometers">Kilómetros</option>
            <option value="miles">Millas</option>
          </select>
        </div>

        <button id="convert-button" class="btn btn-primary">Convertir</button>
      </div>

      <div class="results-container">
        <div class="summary">
          <h2>Resultado:</h2>
          <p id="resultado"></p>
        </div>
      </div>
    </div>
    <!-- === TERMINA EL CÓDIGO HTML DE LA HERRAMIENTA === -->
  </div>
</Layout>

<script>
// === COMIENZA EL CÓDIGO JAVASCRIPT DE LA HERRAMIENTA ===
const valueInput = document.getElementById('value-input');
const unitFrom = document.getElementById('unit-from');
const unitTo = document.getElementById('unit-to');
const resultDisplay = document.getElementById('resultado');
const convertButton = document.getElementById('convert-button');

const conversionRates = {
  meters: {
    kilometers: 0.001,
    miles: 0.000621371,
    meters: 1
  },
  kilometers: {
    meters: 1000,
    miles: 0.621371,
    kilometers: 1
  },
  miles: {
    meters: 1609.34,
    kilometers: 1.60934,
    miles: 1
  }
};

const convertUnits = () => {
  const value = parseFloat(valueInput.value);
  const fromUnit = unitFrom.value;
  const toUnit = unitTo.value;

  if (!isNaN(value) && conversionRates[fromUnit]) {
    const convertedValue = value * conversionRates[fromUnit][toUnit];
    resultDisplay.textContent = `${value} ${fromUnit} = ${convertedValue.toFixed(3)} ${toUnit}`;
  } else {
    resultDisplay.textContent = "Por favor, ingresa un valor válido.";
  }
};

valueInput.addEventListener('input', convertUnits);
unitFrom.addEventListener('change', convertUnits);
unitTo.addEventListener('change', convertUnits);
convertButton.addEventListener('click', convertUnits);

// === TERMINA EL CÓDIGO JAVASCRIPT DE LA HERRAMIENTA ===
</script>